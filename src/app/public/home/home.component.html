<script>
    $(".pop").popover({ trigger: "manual", html: true, animation: false, container: 'body' } })
        .on("mouseenter", function () {
            var _this = this;
            $(this).popover("show");
            $(".popover").on("mouseleave", function () {
                $(_this).popover('hide');
            });
        }).on("mouseleave", function () {
            var _this = this;
            setTimeout(function () {
                if (!$(".popover:hover").length) {
                    $(_this).popover("hide");
                }
            }, 300);
        });  
</script>

<div class="container" style="margin-top: 20px">
    <div class="row">
        <div class="col-md-8">
            <h3>Welcome to DocumentaryWIRE</h3>
            <div class="card text-white bg-dark mb-3">
                <div class="card-body">
                    <h1 class="card-title">Watch Documentaries Online</h1>
                    <p class="card-text">Discover thousands of eye-opening, paradigm shifting, and mind-blowing top
                        documentary films.</p>
                </div>
            </div>

            <div style="margin-top: 40px"></div>
            <h3>Featured</h3>
            <div class="card mb-3">
                <img class="card-img-top" src="/assets/sunset.jpg" alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">Card title</h5>
                    <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                        additional content. This content is a little bit longer.</p>
                    <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                </div>
            </div>

            <div style="margin-top: 40px"></div>
            <h3>Trending</h3>
            <owl-carousel-o [options]="trendingOptions">
                <ng-template *ngFor="let documentary of trending" carouselSlide [width]="230" [id]="documentary.id">
                    <ng-template #popContent>{{ documentary.summary }}</ng-template>
                    <ng-template #popTitle><b>{{ documentary.title }}</b></ng-template>
                    <a class="pop" href="http://localhost" placement="right" [ngbPopover]="popContent"
                        [popoverTitle]="popTitle" triggers="mouseenter:mouseleave">
                        <img height="280" [src]="documentary.poster" [alt]="documentary.title"
                            [title]="documentary.title">
                    </a>
                </ng-template>
            </owl-carousel-o>

            <p *ngIf="isFetchingTrendingDocumentaries">Loading...</p>

            <div style="margin-top: 40px"></div>
            <h3>Recently Added</h3>
            <owl-carousel-o [options]="recentlyAddedOptions">
                <ng-template *ngFor="let documentary of recentlyAdded" carouselSlide [width]="230"
                    [id]="documentary.id">
                    <ng-template #popContent>{{ documentary.summary }}</ng-template>
                    <ng-template #popTitle><b>{{ documentary.title }}</b></ng-template>
                    <a placement="right" [ngbPopover]="popContent" [popoverTitle]="popTitle"
                        triggers="mouseenter:mouseleave">
                        <img height="280" [src]="documentary.poster" [alt]="documentary.title"
                            [title]="documentary.title">
                    </a>
                </ng-template>
            </owl-carousel-o>

            <p *ngIf="isFetchingRecentlyAddedDocumentaries">Loading...</p>

            <div style="margin-top: 40px"></div>
            <h3>Recently Updated</h3>
            <owl-carousel-o [options]="recentlyUpdatedOptions">
                <ng-template *ngFor="let documentary of recentlyUpdated" carouselSlide [width]="230"
                    [id]="documentary.id">
                    <img height="280" [src]="documentary.poster" [alt]="documentary.title" [title]="documentary.title">
                </ng-template>
            </owl-carousel-o>

            <p *ngIf="isFetchingRecentlyUpdatedDocumentaries">Loading...</p>

            <div style="margin-top: 40px"></div>
            <h3>New Releases</h3>
            <owl-carousel-o [options]="newOptions">
                <ng-template *ngFor="let documentary of newDocumentaries" carouselSlide [width]="230"
                    [id]="documentary.id">
                    <img height="280" [src]="documentary.poster" [alt]="documentary.title" [title]="documentary.title">
                </ng-template>
            </owl-carousel-o>

            <p *ngIf="isFetchingNewDocumentaries">Loading...</p>

            <div style="margin-top: 40px"></div>
            <h3>Popular</h3>
            <owl-carousel-o [options]="popularOptions">
                <ng-template *ngFor="let documentary of popularDocumentaries" carouselSlide [width]="230"
                    [id]="documentary.id">
                    <img height="280" [src]="documentary.poster" [alt]="documentary.title" [title]="documentary.title">
                </ng-template>
            </owl-carousel-o>

            <p *ngIf="isFetchingPopularDocumentaries">Loading...</p>

            <!--
            <div class="card mb-1" *ngFor="let documentary of recentlyAdded">
                <div class="row no-gutters">
                    <div class="col-md-3">
                        <img src="{{ documentary.poster }}" class="card-img" style="width: 160px; height: 200px"
                            alt="{{ documentary.title }}">
                    </div>
                    <div class="col-md-9">
                        <div class="card-body">

                            <a [routerLink]="['/', documentary.slug]">
                                <h5 class="card-title">{{ documentary.title }}</h5>
                            </a>
                            <p class="card-text">{{ documentary.summary }}</p>
                            <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                        </div>
                    </div>
                </div>
            </div>
            -->

            <!--<div style="clear:both"></div>
                  
                    <div style="margin-top: 40px" *ngIf="!isFetchingRecentlyUpdatedDocumentaries">
                    <h2>Recently Updated</h2>
                    <div class="card-deck" *ngFor="let cardDeck of recentlyUpdated | keyvalue">
                            <div class="card" style="margin-top: 20px" *ngFor="let documentary of cardDeck.value">
                                <ng-template #popContent>{{ documentary.summary }}</ng-template>
                        <ng-template #popTitle><b>{{ documentary.title }}</b></ng-template>
                            <a placement="right" [ngbPopover]="popContent" [popoverTitle]="popTitle" triggers="mouseenter:mouseleave">
                                <img [src]="getSantizeUrl(documentary.poster)" class="card-img-top" style="width: 100%; height: 160px" alt="...">
                            </a>
                                <div class="card-body">
                                <h5 class="card-title">{{ documentary.title }}</h5>
                                <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p *ngIf="isFetchingRecentlyUpdatedDocumentaries">Loading...</p>
                        <div style="clear:both"></div>
                        <div style="margin-top: 40px" *ngIf="!isFetchingNewDocumentaries">
                        <h2>New Documentaries</h2>
                        <div class="card-deck" *ngFor="let cardDeck of newDocumentaries | keyvalue">
                                <div class="card" style="margin-top: 20px" *ngFor="let documentary of cardDeck.value">
                                        <ng-template #popContent>{{ documentary.summary }}</ng-template>
                                        <ng-template #popTitle><b>{{ documentary.title }}</b></ng-template>
                                            <a placement="right" [ngbPopover]="popContent" [popoverTitle]="popTitle" triggers="mouseenter:mouseleave">
                                                <img [src]="getSantizeUrl(documentary.poster)" class="card-img-top" style="width: 100%; height: 160px" alt="...">
                                            </a>
                                    <div class="card-body">
                                    <h5 class="card-title">{{ documentary.title }}</h5>
                                    <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <p *ngIf="isFetchingNewDocumentaries">Loading...</p>
                    -->

        </div>
        <div class="col-md-4">
            <div>
                <h2>Members</h2>

                <div class="card" *ngIf="!isFetchingActiveUsers">
                    <div class="card-body">
                        <div class="avatar-block" style="margin-left: 10px">
                            <div class="item-avatar" *ngFor="let user of activeUsers">
                                <a [routerLink]="['/user', user.username]" title="{{ user.username }}" rel="nofollow">
                                    <img src="{{ user.avatar }}" class="rounded-circle" style="float:left; margin:3px"
                                        width="50" height="50" alt="Profile picture of {{ user.username }}" />
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <p *ngIf="isFetchingActiveUsers">Loading...</p>

                <div style="clear: both"></div>
                <div style="margin-top: 40px">
                    <h2>Activity</h2>
                    <div *ngIf="!isFetchingActivity" class="card recent-activity">
                        <ul class="list-group list-group-flush ">
                            <li class="list-group-item" *ngFor="let activityItem of activity">
                                <span class="card-text" *ngIf="activityItem.type == 'joined'">
                                    <span class="acitvity-item">
                                        <span class="activity-image">
                                            <a href="">

                                                <img alt='{{ activityItem.parent.name }}'
                                                    src='{{ activityItem.parent.avatar }}'
                                                    class='avatar avatar-48 photo avatar-default rounded-circle'
                                                    height='60' width='60' /></a>
                                        </span>
                                        <div class="data">
                                            <span class="author">
                                                <a href="">
                                                    {{ activityItem.parent.name }}</a>
                                                <span *ngIf="activityItem.child">
                                                    and {{ activityItem.child.length }} more people
                                                </span>
                                                joined
                                            </span>
                                            <span class="excerpt" *ngIf="activityItem.child">
                                                <img *ngFor="let child of activityItem.child"
                                                    class="tiny-image rounded-circle" alt='{{ child.name }}'
                                                    src='{{ child.avatar }}' height='30' width='30' />
                                            </span>
                                        </div>
                                    </span>
                                </span>
                                <span class="card-text" *ngIf="activityItem.type == 'comment'">
                                    <span class="acitvity-item">
                                        <div class="activity-image">
                                            <a href="">
                                                <img alt='{{ activityItem.parent.name }}'
                                                    src='{{ activityItem.parent.avatar }}'
                                                    class='avatar avatar-48 photo avatar-default' height='48'
                                                    width='48' /></a>
                                        </div>
                                        <div class="data">
                                            <span class="author">
                                                <a href="">
                                                    {{ activityItem.parent.name }}</a> commented on
                                                <a href="">
                                                    {{ activityItem.parent.data.documentaryTitle }}</a>
                                            </span>
                                            <p class="excerpt">
                                                {{ activityItem.parent.data.commentText | slice:0:100 }}...
                                            </p>
                                        </div>
                                    </span>
                                </span>

                                <span class="card-text" *ngIf="activityItem.type == 'added'">
                                    <span class="acitvity-item">
                                        <span class="activity-image">
                                            <a href="">

                                                <img alt='{{ activityItem.parent.name }}'
                                                    src='{{ activityItem.parent.avatar }}'
                                                    class='avatar avatar-48 photo avatar-default rounded-circle'
                                                    height='60' width='60' /></a>
                                        </span>
                                        <div class="data">
                                            <span class="author">
                                                <a href="">
                                                    {{ activityItem.parent.name }}</a> added a new documentary
                                                <span *ngIf="activityItem.child">
                                                    plus {{ activityItem.child.length }} more
                                                </span>
                                            </span>
                                            <img class="image" width="50" height="70"
                                                src="{{ activityItem.parent.data.documentaryPoster }}" />
                                            <span class="excerpt" *ngIf="activityItem.child">
                                                <img *ngFor="let child of activityItem.child"
                                                    class="tiny-image rounded-circle" alt='{{ child.name }}'
                                                    src='{{ child.avatar }}' height='30' width='30' />
                                            </span>
                                        </div>
                                    </span>
                                </span>

                                <span class="card-text" *ngIf="activityItem.type == 'watchlist'">
                                    <span class="acitvity-item">
                                        <span class="activity-image">
                                            <a href=""> <img alt='{{ activityItem.parent.name }}'
                                                    src='{{ activityItem.parent.avatar }}'
                                                    class='avatar avatar-48 photo avatar-default rounded-circle'
                                                    height='60' width='60' />
                                            </a>
                                        </span>
                                        <div class="data">
                                            {{ data | json }}
                                            <span class="author">
                                                <a href="">
                                                    {{ activityItem.parent.name }}</a> added <a
                                                    [routerLink]="['/', activityItem.parent.data.documentarySlug]">{{ activityItem.parent.data.documentaryTitle }}</a>
                                                to their Watchlist
                                                <span *ngIf="activityItem.child">
                                                    and {{ activityItem.child.length }} more documentaries
                                                </span>
                                            </span>
                                            <img class="image" width="50" height="70"
                                                src="{{ activityItem.parent.data.documentaryPoster }}" />
                                            <span class="excerpt" *ngIf="activityItem.child">
                                                <img *ngFor="let child of activityItem.child" class="tiny-image"
                                                    alt='{{ child.data.documentaryTitle }}'
                                                    src='{{ child.data.documentaryPoster }}' height='60' width='60' />
                                            </span>
                                        </div>
                                    </span>
                                </span>
                            </li>
                        </ul>
                    </div>
                </div>

                <p *ngIf="isFetchingActivity">Loading...</p>

                <div style="clear: both"></div>
                <div style="margin-top: 30px">
                    <h2>Categories</h2>
                    <div *ngIf="!isFetchingCategories">
                        <ul class="cat-list" *ngFor="let columnPosition of categories | keyvalue">
                            <li *ngFor="let categoryObject of columnPosition.value">
                                <a rel="bookmark" title="Watch {{ categoryObject.name }} Documentaries"
                                    [routerLink]="['/category', categoryObject.slug ]"
                                    routerLinkActive="active">{{ categoryObject.name }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <p *ngIf="isFetchingCategories">Loading...</p>
                <div style="clear: both"></div>

                <div>
                    <h2>Duration</h2>
                    <div *ngIf="!isFetchingDuration">
                        <ul class="cat-list" *ngFor="let columnPosition of duration | keyvalue">
                            <li *ngFor="let durationObject of columnPosition.value">
                                <a rel="bookmark" title="Watch Documentaries by duration {{ durationObject.display }}"
                                    [routerLink]="['/duration', durationObject.slug ]"
                                    routerLinkActive="active">{{ durationObject.display }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <p *ngIf="isFetchingDuration">Loading...</p>
                <div style="clear: both"></div>

                <div>
                    <h2>Years</h2>
                    <div *ngIf="!isFetchingYears">
                        <ul class="cat-list" *ngFor="let columnPosition of years | keyvalue">
                            <li *ngFor="let yearObject of columnPosition.value">
                                <a rel="bookmark" title="Watch Documentaries released in {{ yearObject.year_from }}"
                                    [routerLink]="['/year', yearObject.year_from ]"
                                    routerLinkActive="active">{{ yearObject.year_from }}</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <p *ngIf="isFetchingYears">Loading...</p>

                <div style="clear: both"></div>
                <h2>Subscribe / Follow</h2>
                <div class="card">
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <p class="card-text">
                                <img src="/assets/email.png" width="50" height="50"
                                    style="float: left; margin-right: 10px" />
                                <a onclick="window.open('https://feedburner.google.com/fb/a/mailverify?uri=DocumentaryWire', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true"
                                    target="popupwindow"
                                    href="https://feedburner.google.com/fb/a/mailverify?uri=DocumentaryWire">Get the
                                    latest
                                    documentaries sent straight to your inbox.</a>
                            </p>
                        </li>
                    </ul>
                    <ul class="list-group list-group-flush">
                        <li class="list-group-item">
                            <div class="text-center">
                                <p class="card-text">
                                    <img src="/assets/facebook.png" width="40" height="40" style="margin-right: 5px" />
                                    <img src="/assets/twitter.png" width="40" height="40" style="margin-right: 5px" />
                                    <img src="/assets/instagram.png" width="40" height="40" style="margin-right: 5px" />
                                    <img src="/assets/pinterest.png" width="40" height="40" style="margin-right: 5px" />
                                    <img src="/assets/gab.png" width="40" height="40" />
                                </p>
                            </div>
                        </li>
                    </ul>
                </div>

            </div>
        </div>
    </div>



    <script>
        $(document).ready(function () {


            $(".owl-carousel").owlCarousel();
        })
    </script>